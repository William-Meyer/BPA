<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/styles/survey.css">
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script type="text/javascript">
    var c1 = 0;
    var c2 = 0;
    var c3 = 0;
    var c4 = 0;


    function checkSlider()
    {

      var slider1 = document.getElementById("myRange1");
      var slider2 = document.getElementById("myRange2");
      var slider3 = document.getElementById("myRange3");
      var slider4 = document.getElementById("myRange4");
      var slider5 = document.getElementById("myRange5");
      c1 += slider1.value;
      c2 += slider2.value;
      c3 += slider3.value;
      c4 += slider4.value;
      c4 += slider4.value;
      c4 = c4/2;
      drawChart()
    }

    function drawChart()
    {
      // Create root element
      // https://www.amcharts.com/docs/v5/getting-started/#Root_element
      var root = am5.Root.new("chartdiv");

      // Set themes
      // https://www.amcharts.com/docs/v5/concepts/themes/
      root.setThemes([
        am5themes_Animated.new(root)
      ]);

      // Create chart
      // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/
      var chart = root.container.children.push(
        am5percent.PieChart.new(root, {
          endAngle: 270
        })
      );

      // Create series
      // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Series
      var series = chart.series.push(
        am5percent.PieSeries.new(root, {
          valueField: "value",
          categoryField: "category",
          endAngle: 270
        })
      );

      series.states.create("hidden", {
        endAngle: -90
      });

      // Set data
      // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Setting_data
      series.data.setAll(
        [
        {
        category: "C1",
        value: c1},
        {
        category: "C2",
        value: c2
      },
      {
        category: "C3",
        value: c3
      },
      {
        category: "C4",
        value: c4

      }

    ]);

      series.appear(1000, 100);

      }; // end am5.ready()

      var slideIndex = 1;
      showSlides(slideIndex);

// Next/previous controls
function plusSlides(n) {
  showSlides(slideIndex += n);
}

// Thumbnail image controls
function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  var dots = document.getElementsByClassName("dot");
  if (n > slides.length) {slideIndex = slides.length}
  if (n < 1) {slideIndex = 1}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
  }
  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";
  dots[slideIndex-1].className += " active";
  if (n == slides.length)
  {
    checkSlider();
    drawChart();
  }
}
window.onload = function exampleFunction() {
            currentSlide(1)
        }



        function init() {
    const sliders = document.getElementsByClassName("tick-slider-input");

    for (let slider of sliders) {
        slider.oninput = onSliderInput;

        updateValue(slider);
        updateValuePosition(slider);
        updateLabels(slider);
        updateProgress(slider);

        setTicks(slider);
    }
}

function onSliderInput(event) {
    updateValue(event.target);
    updateValuePosition(event.target);
    updateLabels(event.target);
    updateProgress(event.target);
}

function updateValue(slider) {
    let value = document.getElementById(slider.dataset.valueId);

    value.innerHTML = "<div>" + slider.value + "</div>";
}

function updateValuePosition(slider) {
    let value = document.getElementById(slider.dataset.valueId);

    const percent = getSliderPercent(slider);

    const sliderWidth = slider.getBoundingClientRect().width;
    const valueWidth = value.getBoundingClientRect().width;
    const handleSize = slider.dataset.handleSize;

    let left = percent * (sliderWidth - handleSize) + handleSize / 2 - valueWidth / 2;

    left = Math.min(left, sliderWidth - valueWidth);
    left = slider.value === slider.min ? 0 : left;

    value.style.left = left + "px";
}

function updateLabels(slider) {
    const value = document.getElementById(slider.dataset.valueId);
    const minLabel = document.getElementById(slider.dataset.minLabelId);
    const maxLabel = document.getElementById(slider.dataset.maxLabelId);

    const valueRect = value.getBoundingClientRect();
    const minLabelRect = minLabel.getBoundingClientRect();
    const maxLabelRect = maxLabel.getBoundingClientRect();

    const minLabelDelta = valueRect.left - (minLabelRect.left);
    const maxLabelDelta = maxLabelRect.left - valueRect.left;

    const deltaThreshold = 32;

    if (minLabelDelta < deltaThreshold) minLabel.classList.add("hidden");
    else minLabel.classList.remove("hidden");

    if (maxLabelDelta < deltaThreshold) maxLabel.classList.add("hidden");
    else maxLabel.classList.remove("hidden");
}

function updateProgress(slider) {
    let progress = document.getElementById(slider.dataset.progressId);
    const percent = getSliderPercent(slider);

    progress.style.width = percent * 100 + "%";
}

function getSliderPercent(slider) {
    const range = slider.max - slider.min;
    const absValue = slider.value - slider.min;

    return absValue / range;
}

function setTicks(slider) {
    let container = document.getElementById(slider.dataset.tickId);
    const spacing = parseFloat(slider.dataset.tickStep);
    const sliderRange = slider.max - slider.min;
    const tickCount = sliderRange / spacing + 1; // +1 to account for 0

    for (let ii = 0; ii < tickCount; ii++) {
        let tick = document.createElement("span");

        tick.className = "tick-slider-tick";

        container.appendChild(tick);
    }
}

function onResize() {
    const sliders = document.getElementsByClassName("tick-slider-input");

    for (let slider of sliders) {
        updateValuePosition(slider);
    }
}

window.onload = init;
window.addEventListener("resize", onResize);
    </script>
    <title></title>
  </head>
  <body onload="currentSlide(1)">
<div class="slideshow-container">

  <!-- Full-width images with number and caption text -->
  <div class="mySlides fade">
    <div id = "slide1">
      <h1>
        Find Your Footprint
      </h1>
      <h2>
          Click the Arrow to Start
      </h2>
    </div>

    <img src="Assets/imgs/quiz_home.JPG" style="width:100%">
  </div>

  <div class="mySlides fade">
    <img src="Assets/imgs/quiz1.JPG" style="width:100%" id = "img2">
      <h1 class = "questionText">On average, how many miles do you drive per week?</h1>
    <div class="text">

      </div>
      <div id="wrapper">
          <div id="sliderContainer">
              <div class="tick-slider">
                  <div class="tick-slider-header">
                      <h5><label for="weightSlider">How Many Miles Do You Drive?</label></h5>
                  </div>
                  <div class="tick-slider-value-container">
                      <div id="weightLabelMin" class="tick-slider-label">0</div>
                      <div id="weightLabelMax" class="tick-slider-label">5</div>
                      <div id="weightValue" class="tick-slider-value"></div>
                  </div>
                  <div class="tick-slider-background"></div>
                  <div id="weightProgress" class="tick-slider-progress"></div>
                  <div id="weightTicks" class="tick-slider-tick-container"></div>
                  <input
                      id="weightSlider"
                      class="tick-slider-input"
                      type="range"
                      min="0"
                      max="5"
                      step="1"
                      value="3"
                      data-tick-step="1"
                      data-tick-id="weightTicks"
                      data-value-id="weightValue"
                      data-progress-id="weightProgress"
                      data-handle-size="18"
                      data-min-label-id="weightLabelMin"
                      data-max-label-id="weightLabelMax"
                  />
              </div>
          </div>
      </div>
  </div>

  <div class="mySlides fade">
    <h1 class="questionText">How many bags of garbage do you throw away weekly?</h1>
    <img src="Assets/imgs/quiz2.JPG" style="width:100%">
    <div class="text">
      <div class="outer">

      <div id="form-wrapper2">
  <form action="/p/quote.php" method="GET">
    <div id="debt-amount-slider2">
      <input type="radio" name="debt-amount2" id="1" value="2" required>
      <label for="1" data-debt-amount="0-2"></label>
      <input type="radio" name="debt-amount2" id="2" value="4" required>
      <label for="2" data-debt-amount="3"></label>
      <input type="radio" name="debt-amount2" id="3" value="6" required>
      <label for="3" data-debt-amount="4"></label>
      <input type="radio" name="debt-amount2" id="4" value="8" required>
      <label for="4" data-debt-amount="5"></label>
      <input type="radio" name="debt-amount2" id="5" value="10" required>
      <label for="5" data-debt-amount="6+"></label>
      <div id="debt-amount-pos2"></div>
    </div>
  </form>
  </div>
    </div>
  </div>
  </div>

  <div class="mySlides fade">
    <h1 class="questionText">How often do you consume animal products?</h1>
    <img src="Assets/imgs/quiz3.JPG" style="width:100%">
    <div class="text">
    <input type="range" min="0" max="5"  name = "q1" value="2.5" class="slider" id="myRange3"></div>
  </div>

  <div class="mySlides fade">
    <h1 class = "questionText">How often do you fly in a year?</h1>
    <img src="Assets/imgs/quiz4.JPG" style="width:100%">
    <div class="text">
    <input type="range" min="0" max="5"  name = "q1" value="2.5" class="slider" id="myRange4"></div>
  </div>

  <div class="mySlides fade">
    <h1 class="questionText">How much is your household energy bill each month, on average?</h1>
    <img src="Assets/imgs/quiz5.JPG" style="width:100%">
    <div class="text">
    <input type="range" min="0" max="5"  name = "q1" value="2.5" class="slider" id="myRange5"></div>
  </div>

  <!-- Next and previous buttons -->
  <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
  <a class="next" onclick="plusSlides(1)">&#10095;</a>
</div>
<br>

<!-- The dots/circles -->
<div style="text-align:center">
  <span class="dot" onclick="currentSlide(1)"></span>
  <span class="dot" onclick="currentSlide(2)"></span>
  <span class="dot" onclick="currentSlide(3)"></span>
  <span class="dot" onclick="currentSlide(4)"></span>
  <span class="dot" onclick="currentSlide(5)"></span>
  <span class="dot" onclick="currentSlide(6)"></span>
</div>

    <div id = "Containter">
        <input type="button" name="" value="Done" onClick = checkSlider()>
        <div id = "chart"></div>
    </div>
    <div id="chartdiv" style="height: 300px; width: 50%;"></div>

    <div id="wrapper">
        <div id="sliderContainer">
            <div class="tick-slider">
                <div class="tick-slider-header">
                    <h5><label for="weightSlider">Total weight</label></h5>
                    <h5>kg</h5>
                </div>
                <div class="tick-slider-value-container">
                    <div id="weightLabelMin" class="tick-slider-label">0</div>
                    <div id="weightLabelMax" class="tick-slider-label">40</div>
                    <div id="weightValue" class="tick-slider-value"></div>
                </div>
                <div class="tick-slider-background"></div>
                <div id="weightProgress" class="tick-slider-progress"></div>
                <div id="weightTicks" class="tick-slider-tick-container"></div>
                <input
                    id="weightSlider"
                    class="tick-slider-input"
                    type="range"
                    min="0"
                    max="40"
                    step="5"
                    value="9"
                    data-tick-step="5"
                    data-tick-id="weightTicks"
                    data-value-id="weightValue"
                    data-progress-id="weightProgress"
                    data-handle-size="18"
                    data-min-label-id="weightLabelMin"
                    data-max-label-id="weightLabelMax"
                />
            </div>
            <div class="tick-slider">
                <div class="tick-slider-header">
                    <h5><label for="sizeSlider">Total size</label></h5>
                    <h5>cm</h5>
                </div>
                <div class="tick-slider-value-container">
                    <div id="sizeLabelMin" class="tick-slider-label">0</div>
                    <div id="sizeLabelMax" class="tick-slider-label">300</div>
                    <div id="sizeValue" class="tick-slider-value"></div>
                </div>
                <div class="tick-slider-background"></div>
                <div id="sizeProgress" class="tick-slider-progress"></div>
                <div id="sizeTicks" class="tick-slider-tick-container"></div>
                <input
                    id="sizeSlider"
                    class="tick-slider-input"
                    type="range"
                    min="0"
                    max="300"
                    step="25"
                    value="150"
                    data-tick-step="25"
                    data-tick-id="sizeTicks"
                    data-value-id="sizeValue"
                    data-progress-id="sizeProgress"
                    data-handle-size="18"
                    data-min-label-id="sizeLabelMin"
                    data-max-label-id="sizeLabelMax"
                />
            </div>
        </div>
    </div>

  </body>
</html>
